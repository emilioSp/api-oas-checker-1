(globalThis.webpackChunkapi_oas_checker=globalThis.webpackChunkapi_oas_checker||[]).push([[179],{7108:(e,t,a)=>{"use strict";var r=a(7294),n=a(3935),s=a(7703),l=a(4890),o=a(7838);const i={isMenuDisplayed:!0};var c=a(3722),u=a(4586);const d={results:null,rawResults:null,inProgress:!1,ruleset:c.hW},m={focusLine:null,text:null,url:c.dq},p=(0,l.UY)({menuState:function(e=i,t){switch(t.type){case o.bb:return{isMenuDisplayed:!e.isMenuDisplayed};default:return e}},validationState:function(e=d,t){switch(t.type){case o.yn:return{...e,inProgress:!1,rawResults:t.results,results:(0,u.f3)(t.results)};case o.Ag:return{...e,inProgress:!0,rawResults:null,results:null};case o.hF:return{...e,ruleset:t.ruleset};default:return e}},documentState:function(e=m,t){switch(t.type){case o.aJ:return{...e,text:t.text,url:null};case o.jn:return{...e,focusLine:t.line};case o.KP:return{...e,url:t.url};default:return e}}}),g=(0,l.MT)(p,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());var h=a(7560),E=a(2106),b=a(4184),v=a.n(b),f=a(9795),y=a(7595),x=a(5697),w=a.n(x);const R=(0,E.QM)({version:{composes:"mr-1 m-2 badge badge-pill",backgroundColor:"var(--white)",color:"var(--primary)"},icon:{fontSize:"1.5rem"},animate:{transition:"0.3s ease-in-out"},anchor:{composes:"m-0 ml-auto d-none d-md-block",color:"var(--white)",fontSize:"0.8rem","&:hover":{color:"var(--white)"},"&:focus":{boxShadow:"none"}}}),N=({isMenuDisplayed:e,toogleMenu:t})=>{const a=R(),n=v()({"col-lg-2 col-xxl-1":e,"col-lg-1 col-xxl-1":!e,"bg-white":e},"d-flex","align-items-center","p-3",a.animate),s=v()({"col-lg-10 col-xxl-11":e,"col-lg-11 col-xxl-11":!e},"d-flex","justify-content-center","justify-content-lg-start","align-items-center","py-3",a.animate),l=v()({"icon-white":!e,"icon-primary":e},"ml-4",a.icon);return r.createElement("header",{"data-testid":"header"},r.createElement("div",{className:"container-fluid p-0 user-select-none"},r.createElement("div",{className:"row no-gutters bg-primary text-white"},r.createElement("div",{className:n},r.createElement(h.JO,{onClick:t,role:"button",className:l,icon:"it-burger","data-testid":"toogle-menu-icon"})),r.createElement("div",{"data-testid":"right-section",className:s},r.createElement("img",{className:"d-none d-md-block ml-4 mr-2",src:"it.svg",alt:"it logo"}),r.createElement("img",{className:"d-none d-md-block mx-2",src:"loghetto.svg",alt:"checker logo"}),r.createElement("span",{className:"m-0 font-weight-semibold"},"Italian OpenAPI Validation Checker"),r.createElement("span",{href:"#",className:a.version},"Beta ","0.3.0"),r.createElement("a",{className:a.anchor,href:"https://github.com/italia/api-oas-checker"},"Info + Repo"),r.createElement(h.JO,{color:"white",className:"p-2 d-none d-md-block",icon:"it-github",size:"lg"})))))};N.propTypes={isMenuDisplayed:w().bool.isRequired,toogleMenu:w().func.isRequired};const k=(0,s.$j)((e=>({isMenuDisplayed:(0,y.Ne)(e)})),{toogleMenu:f.uy})(N);var I=a(180),S=a(2701),C=a(684),V=a(7985);const M={isModalOpen:!1},T=(e,t)=>{switch(t.type){case"openModal":return{...e,isModalOpen:!0};case"closeModal":return{...e,isModalOpen:!1};default:return e}},D=()=>{const[e,t]=(0,r.useReducer)(T,M);return[e.isModalOpen,()=>t({type:"closeModal"}),()=>t({type:"openModal"})]},P=({isValidationInProgress:e,setDocumentUrl:t,resetValidationResults:a})=>{const[n,s,l]=D(),[o,i]=(0,r.useState)(""),c=(0,r.useCallback)((()=>{t(o),a(),s()}),[o,t,a,s]),u=(0,r.useCallback)((e=>{i(e.target.value)}),[]);return r.createElement(r.Fragment,null,r.createElement(h.zx,{onClick:l,color:"custom-white",disabled:e,icon:!1,tag:"button"},"From url"),r.createElement(I.Z,{fade:!1,isOpen:n,role:"dialog",centered:!0,toggle:s},r.createElement(S.Z,{charCode:215,closeAriaLabel:"Close",tag:"h5",wrapTag:"div",toggle:s},"Load from url"),r.createElement(C.Z,{className:"mt-3",tag:"div"},r.createElement(h.II,{label:"Url",type:"text",value:o,onChange:u})),r.createElement(V.Z,{tag:"div"},r.createElement(h.zx,{color:"primary",icon:!1,onClick:c,tag:"button"},"Load Url"))))};P.propTypes={isValidationInProgress:w().bool.isRequired,setDocumentUrl:w().func.isRequired,resetValidationResults:w().func.isRequired};const O=(0,s.$j)((e=>({isValidationInProgress:(0,y.Gt)(e)})),{setDocumentUrl:f.bu,resetValidationResults:f.Dy})(P),$=({isValidationInProgress:e,setDocumentUrl:t,resetValidationResults:a})=>{const n=(0,r.useCallback)((e=>{const r=e.target.files[0],n=new FileReader;n.onload=e=>{t(e.target.result),a()},n.readAsDataURL(r)}),[t,a]),s=v()({disabled:e},["btn","btn-custom-white"]);return r.createElement("label",{role:"button",className:s},"Upload file ",r.createElement("input",{type:"file",hidden:!0,onChange:n}))};$.propTypes={isValidationInProgress:w().bool.isRequired,setDocumentUrl:w().func.isRequired,resetValidationResults:w().func.isRequired};const _=(0,s.$j)((e=>({isValidationInProgress:(0,y.Gt)(e)})),{setDocumentUrl:f.bu,resetValidationResults:f.Dy})($),L=({isValidationInProgress:e,validationResults:t})=>{const a=(0,r.useCallback)((()=>{(0,c.Sv)(JSON.stringify(t,null,2),`oas-results-${(new Date).toISOString()}.json`,"json")}),[t]);return r.createElement(h.zx,{color:"custom-white",disabled:e||null===t||0===t.length,icon:!1,tag:"button",onClick:a},"Export results")};L.propTypes={isValidationInProgress:w().bool.isRequired,validationResults:(0,u.Hb)()};const q=(0,s.$j)((e=>({isValidationInProgress:(0,y.Gt)(e),validationResults:(0,y.Kj)(e)})))(L),U=({isValidationInProgress:e,documentText:t})=>{const a=(0,r.useCallback)((()=>{(0,c.Sv)(t,`api-spec-${(new Date).toISOString()}.yaml`,"yaml")}),[t]);return r.createElement(h.zx,{color:"custom-white",disabled:e||""===t,icon:!1,tag:"button",onClick:a},"Save file")};U.propTypes={isValidationInProgress:w().bool.isRequired,documentText:w().string};const j=(0,s.$j)((e=>({isValidationInProgress:(0,y.Gt)(e),documentText:(0,y.wE)(e)})))(U),z=({isValidationInProgress:e,setDocumentUrl:t,resetValidationResults:a})=>{const n=(0,r.useCallback)((()=>{t(c.UV),a()}),[t,a]);return r.createElement(h.zx,{onClick:n,color:"custom-white",disabled:e,icon:!1,tag:"button"},"Template")};z.propTypes={isValidationInProgress:w().bool.isRequired,setDocumentUrl:w().func.isRequired,resetValidationResults:w().func.isRequired};const B=(0,s.$j)((e=>({isValidationInProgress:(0,y.Gt)(e)})),{setDocumentUrl:f.bu,resetValidationResults:f.Dy})(z),F=(0,E.QM)({buttonContainer:{composes:"m-4 pl-3","& button":{padding:"8px 16px",width:"100%"},"& label":{padding:"8px 16px",width:"100%",marginBottom:0}}}),A=()=>{const e=F();return r.createElement(r.Fragment,null,r.createElement("section",{className:"border-top","data-testid":"menu"},r.createElement("div",{className:e.buttonContainer},r.createElement(j,null)),r.createElement("div",{className:e.buttonContainer},r.createElement(q,null))),r.createElement("section",{className:"border-top"},r.createElement("div",{className:e.buttonContainer},r.createElement(_,null)),r.createElement("div",{className:e.buttonContainer},r.createElement(O,null)),r.createElement("div",{className:e.buttonContainer},r.createElement(B,null))))};var G=a(2669),Z=a(7954);const Q=(0,E.QM)({"@keyframes rotation":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}},validatorIcon:{composes:"ml-3",fontSize:"1.5rem",animation:e=>e&&"$rotation 2s infinite"},formGroupButtonValidate:{composes:"mx-3",flexGrow:e=>e&&1}}),J=new function(){return new Worker(a.p+"spectral_worker.062e57f3f765d4ab6307.worker.js")},H=({documentText:e,isValidationInProgress:t,ruleset:a,resetValidationResults:n,setValidationResults:s,setValidationInProgress:l})=>{const o=(0,r.useRef)(),i=(0,r.useRef)(),c=(0,r.useCallback)((()=>o.current!==e||i.current!==a),[e,a]),u=Q(t),d=(0,r.useCallback)((()=>{l(),J.postMessage({documentText:e,ruleset:`${location.href}${a}`}),J.onmessage=e=>{if(e.data.error)return console.error(e.data.error),alert(`Error during validation\n        \n${e.data.error}`),void n();s(e.data)}}),[e,n,l,s,a]),[m,p]=(0,r.useState)(!1);(0,r.useEffect)((()=>{m&&c()&&d()}),[m,d,c]),(0,r.useEffect)((()=>{o.current=e,i.current=a}));const g=(0,r.useCallback)((()=>{p(!m)}),[m,p]);return r.createElement("div",{className:"py-3 d-flex align-items-center bg-white"},r.createElement("div",{className:u.formGroupButtonValidate,tag:"div"},r.createElement(h.zx,{"data-testid":"validation-button",className:"w-100 py-2 px-3",color:"primary",icon:!0,disabled:null===e,tag:"button",onClick:t?Function.prototype:d},t?"Please wait...":"Validate",r.createElement(h.JO,{className:u.validatorIcon,color:"white",icon:"it-refresh"}))),!t&&r.createElement(G.Z,{check:!0,className:"mx-3 my-0",tag:"div"},r.createElement("div",{"data-testid":"auto-refresh",className:"toggles"},r.createElement(Z.Z,{className:"m-0 font-weight-light",check:!0},"Auto-refresh",r.createElement(h.II,{type:"checkbox",checked:m,onChange:g}),r.createElement("span",{className:"lever"})))))};H.propTypes={isValidationInProgress:w().bool.isRequired,documentText:w().string,ruleset:w().oneOf([c.w$,c.Ii,c.iB,c.Wt]),resetValidationResults:w().func.isRequired,setValidationInProgress:w().func.isRequired,setValidationResults:w().func.isRequired};const W=(0,s.$j)((e=>({documentText:(0,y.wE)(e),isValidationInProgress:(0,y.Gt)(e),ruleset:(0,y.B7)(e)})),{resetValidationResults:f.Dy,setValidationResults:f.db,setValidationInProgress:f.ib})(H),K=(0,E.QM)({error:{backgroundColor:e=>e.errors>0?"var(--danger)":"var(--success-light)",color:e=>e.errors>0?"var(--white)":"var(--text-dark)"},warning:{backgroundColor:e=>e.warnings>0?"var(--warning)":"var(--success-light)",color:"var(--text-dark)"}}),X=({validationResults:e})=>{const t={errors:e?.filter((e=>(0,u.g9)(e.severity)===c.pn)).length,warnings:e?.filter((e=>(0,u.g9)(e.severity)===c.cM)).length},a=K(t);return e&&r.createElement("div",{className:"d-flex p-3 bg-primary"},r.createElement("h4",{className:"pr-3"},r.createElement(h.Ct,{"data-testid":"errors-badge",className:a.error,pill:!1,tag:"span"},(e=>e.errors>0?`${e.errors} errors`:"No errors")(t))),r.createElement("h4",null,r.createElement(h.Ct,{"data-testid":"warnings-badge",className:a.warning,pill:!1,tag:"span"},(e=>e.warnings>0?`${e.warnings} warnings`:"No warnings")(t))))};X.propTypes={validationResults:(0,u.Hb)()};const Y=(0,s.$j)((e=>({validationResults:(0,y.eE)(e)})))(X);var ee=a(7856),te=a.n(ee),ae=a(7084),re=a.n(ae);const ne={margin:"8px 0px 0px 4px",height:"16px",width:"16px",borderRadius:"50%",display:"inline-block"},se=(0,E.QM)({resultItem:{composes:"row py-2 no-gutters",borderLeft:"8px solid var(--white)",borderRight:"8px solid var(--white)",backgroundColor:"var(--white)","&:hover":{borderColor:e=>(0,u.g9)(e.severity)===c.pn?"var(--danger)":"var(--warning)",backgroundColor:e=>(0,u.g9)(e.severity)===c.cM?"var(--warning-hover)":"var(--danger-hover)"},"&:hover $warning":{border:"0px"}},resultMessage:{composes:"col-9 col-xxl-10 px-4 text-justify",fontSize:"0.9rem",marginTop:"2px",wordBreak:"break-all"},resultLine:{composes:"col-1 text-center",marginTop:"2px"},resultDescription:{"& p":{fontSize:"1rem !important",marginBottom:"1rem !important"}},info:{composes:"icon icon-primary",width:"20px"},error:{extend:ne,backgroundColor:"var(--danger)"},warning:{extend:ne,border:"1px solid var(--text-dark)",backgroundColor:"var(--warning)"}}),le=({resultItem:e,focusDocumentLine:t})=>{const a=se(e),[n,s,l]=D(),o=(0,r.useCallback)((e=>{l(),e.stopPropagation()}),[l]),i=(0,r.useCallback)((()=>{t({line:(0,u.Vh)(e),character:e.range.start.character})}),[e,t]),d=(0,r.useCallback)((()=>{window.open("https://slack.developers.italia.it/")}),[]),m=(0,r.useMemo)((()=>({__html:te().sanitize(re()((0,c.oF)(e?.description??"")),{USE_PROFILES:{html:!0}})})),[e]);return r.createElement(r.Fragment,null,r.createElement("div",{"data-testid":"validation-result-entry",className:a.resultItem,role:"button",onClick:i},r.createElement("div",{className:"col-2 col-xxl-1 d-flex justify-content-center"},r.createElement("div",null,r.createElement(h.JO,{type:"button",className:a.info,icon:"it-info-circle",onClick:o})),r.createElement("div",{className:v()({[a.error]:(0,u.g9)(e.severity)===c.pn,[a.warning]:(0,u.g9)(e.severity)===c.cM})})),r.createElement("div",{className:a.resultLine},(0,u.Vh)(e)),r.createElement("div",{className:a.resultMessage},e.message)),r.createElement(I.Z,{fade:!1,isOpen:n,role:"dialog",centered:!0,toggle:s},r.createElement(S.Z,{charCode:215,closeAriaLabel:"Close",tag:"h5",wrapTag:"div",toggle:s},e.code),r.createElement(C.Z,{className:"mt-3",tag:"div"},r.createElement("div",{className:a.resultDescription,dangerouslySetInnerHTML:m})),r.createElement(V.Z,{tag:"div"},r.createElement(h.zx,{className:"white-bg",color:"custom-white",icon:!1,onClick:d,tag:"button"},"Ask Slack"))))};le.propTypes={resultItem:(0,u.RZ)(),focusDocumentLine:w().func.isRequired};const oe=(0,s.$j)(null,{focusDocumentLine:f.I$})(le),ie=(0,E.QM)({enableScrollResults:{height:"calc(100vh - 376px)",overflow:"scroll"},headerResults:{composes:"row py-3 no-gutters border-bottom",backgroundColor:"var(--white)",borderLeft:"8px solid var(--white)",borderRight:"8px solid var(--white)"}}),ce=({validationResults:e})=>{const t=ie();return null===e||0===e.length?null:r.createElement(r.Fragment,null,r.createElement("div",{className:t.headerResults,"data-testid":"validation-results-header"},r.createElement("div",{className:"col-2 col-xxl-1 text-center"},"Type"),r.createElement("div",{className:"col-1 text-center"},"Line"),r.createElement("div",{className:"col-9 col-xxl-10 px-4"},"Message")),r.createElement("div",{className:t.enableScrollResults},e.map((e=>r.createElement(oe,{key:(0,u.IB)(e),resultItem:e})))))};ce.propTypes={validationResults:(0,u.Hb)()};const ue=(0,s.$j)((e=>({validationResults:(0,y.eE)(e)})))(ce),de=(0,E.QM)({select:{composes:"mx-3 px-2",height:"50px",width:"70%",fontSize:"0.9rem"},anchor:{fontSize:"0.9rem","&:focus":{boxShadow:"none"},"&:hover":{color:"var(--primary)"}},info:{composes:"icon icon-primary mx-1",width:"24px"}}),me=({isValidationInProgress:e,ruleset:t,setRuleset:a})=>{const n=de();return r.createElement("div",{className:"pt-3 d-flex align-items-center bg-white"},r.createElement("select",{className:n.select,disabled:e,value:t,onChange:e=>a(e.target.value)},r.createElement("option",{value:c.w$},"Italian API Guidelines"),r.createElement("option",{value:c.Ii},"Best Practices Only"),r.createElement("option",{value:c.iB},"Extra Security Checks"),r.createElement("option",{value:c.Wt},"Italian API Guidelines + Extra Security Checks")),r.createElement("a",{className:n.anchor,href:(0,c.nS)(t),rel:"noreferrer",target:"_blank"},"Ruleset"),r.createElement(h.JO,{className:n.info,icon:"it-info-circle"}))};me.propTypes={isValidationInProgress:w().bool.isRequired,ruleset:w().string.isRequired,setRuleset:w().func.isRequired};const pe=(0,s.$j)((e=>({isValidationInProgress:(0,y.Gt)(e),ruleset:(0,y.B7)(e)})),{setRuleset:f.QG})(me),ge=r.lazy((()=>Promise.all([a.e(736),a.e(468)]).then(a.bind(a,8468)))),he=(0,E.QM)({animate:{transition:"0.3s ease-in-out"},fullHeight:{height:"calc(100vh - 90px)"},main:{extend:"fullHeight",composes:"container-fluid p-0"},editor:{extend:"animate",overflow:"hidden",borderLeft:"10px solid var(--primary)",borderBottom:"10px solid var(--primary)"},rightSection:{composes:"col-lg-4 bg-primary",extend:"animate"},"col-0":{flex:"0 0 0%",maxWidth:"0%"},spinnerContainer:{extend:"fullHeight",composes:"d-flex align-items-center justify-content-center"}}),Ee=({isMenuDisplayed:e})=>{const t=he(),a=v()({"col-lg-2 col-xxl-1":e,[t["col-0"]]:!e},t.animate),n=v()({"col-lg-6 col-xxl-7":e,"col-lg-8":!e},t.editor);return r.createElement("main",{className:t.main,"data-testid":"main"},r.createElement("div",{className:"row no-gutters"},r.createElement("aside",{className:a},r.createElement(A,null)),r.createElement("section",{className:n},r.createElement(r.Suspense,{fallback:r.createElement("div",{className:t.spinnerContainer},r.createElement(h.$j,{active:!0,double:!0,small:!1,tag:"span"}))},r.createElement(ge,null))),r.createElement("section",{className:t.rightSection},r.createElement(pe,null),r.createElement(W,null),r.createElement(Y,null),r.createElement(ue,null))))};Ee.propTypes={isMenuDisplayed:w().bool.isRequired};const be=(0,s.$j)((e=>({isMenuDisplayed:(0,y.Ne)(e)})))(Ee),ve=()=>r.createElement(r.Fragment,null,r.createElement(k,null),r.createElement(be,null));n.render(r.createElement(r.StrictMode,null,r.createElement(s.zt,{store:g},r.createElement(ve,null))),document.getElementById("root"))},7838:(e,t,a)=>{"use strict";a.d(t,{bb:()=>r,yn:()=>n,Ag:()=>s,aJ:()=>l,jn:()=>o,KP:()=>i,hF:()=>c});const r="TOOGLE_MENU",n="SET_VALIDATION_RESULTS",s="SET_VALIDATION_IN_PROGRESS",l="SET_DOCUMENT_TEXT",o="FOCUS_DOCUMENT_LINE",i="LOAD_DOCUMENT_FROM_URL",c="SET_RULESET"},9795:(e,t,a)=>{"use strict";a.d(t,{uy:()=>n,db:()=>s,Dy:()=>l,ib:()=>o,QG:()=>i,tD:()=>c,I$:()=>u,bu:()=>d});var r=a(7838);const n=()=>({type:r.bb}),s=e=>({type:r.yn,results:e}),l=()=>s(null),o=()=>({type:r.Ag}),i=e=>({type:r.hF,ruleset:e}),c=e=>({type:r.aJ,text:e}),u=e=>({type:r.jn,line:e}),d=e=>({type:r.KP,url:e})},7595:(e,t,a)=>{"use strict";a.d(t,{eE:()=>r,Kj:()=>n,Gt:()=>s,B7:()=>l,Ne:()=>o,wE:()=>i,uF:()=>c,F$:()=>u});const r=e=>e.validationState.results,n=e=>e.validationState.rawResults,s=e=>e.validationState.inProgress,l=e=>e.validationState.ruleset,o=e=>e.menuState.isMenuDisplayed,i=e=>e.documentState.text,c=e=>e.documentState.url,u=e=>e.documentState.focusLine},4586:(e,t,a)=>{"use strict";a.d(t,{g9:()=>l,Hb:()=>o,RZ:()=>i,Vh:()=>c,Wg:()=>u,f3:()=>d,IB:()=>m});var r=a(3722),n=a(5697),s=a.n(n);const l=e=>0===e?r.pn:r.cM,o=()=>s().arrayOf(i()),i=()=>s().shape({code:s().string.isRequired,description:s().string,range:s().exact({start:s().object,end:s().shape({line:s().number.isRequired,character:s().number.isRequired})}),message:s().string.isRequired,severity:s().number.isRequired}),c=e=>e.range.start.line+1,u=e=>null===e?new Map:e.reduce(((e,t)=>{const a=c(t);return e.has(a)?(l(t.severity)===r.pn&&e.set(a,t.severity),e):(e.set(a,t.severity),e)}),new Map),d=e=>{if(null===e)return null;const t=e.reduce(((e,t)=>{const a=m(t);return e.has(a)||e.set(a,t),e}),new Map);return Array.from(t.values())},m=e=>`${e.code}-${e.severity}-${e.range.start.line}-${e.message}`},3722:(e,t,a)=>{"use strict";a.d(t,{nS:()=>r,pn:()=>n,cM:()=>s,dq:()=>l,UV:()=>o,w$:()=>i,Ii:()=>c,iB:()=>u,Wt:()=>d,hW:()=>m,Sv:()=>p,oF:()=>g});const r=e=>`${e.split(".")[0]}.doc.html`,n="error",s="warning",l="initial.yaml",o="https://raw.githubusercontent.com/teamdigitale/api-starter-kit/master/openapi/simple.yaml.src",i="spectral.yml",c="spectral-generic.yml",u="spectral-security.yml",d="spectral-full.yml",m=i,p=(e,t,a)=>{const r=document.createElement("a"),n=new Blob([e],{type:a});r.href=URL.createObjectURL(n),r.download=t,r.click()},g=e=>e.replace(/(rfc[0-9]+)/gi,"[$1](https://tools.ietf.org/html/$1)")}},function(e){"use strict";var t;t=e.x,e.x=()=>{var a=t();return e.E(736),e.E(468),a}},[[7108,666,736]]]);